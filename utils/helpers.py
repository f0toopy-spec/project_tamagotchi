import pygame
from config import *


def draw_text(surface, text, size, x, y, color=BLACK):
    """Отрисовывает текст на заданной поверхности.
    
    Функция создает и отрисовывает текст с заданными параметрами.
    Позиционирование осуществляется по центру верхней границы текста.
    
    Аргументы:
        surface: Поверхность PyGame, на которой будет отрисован текст
        text: Текстовая строка для отрисовки
        size: Размер шрифта (в пунктах)
        x: X-координата центра текста
        y: Y-координата верхней границы текста
        color: Цвет текста в формате RGB (по умолчанию BLACK)
    
    Пример использования:
        draw_text(screen, "Hello World", 36, 400, 300, RED)
    """
    # Создаем объект шрифта с заданным размером
    # None означает использование системного шрифта по умолчанию
    font = pygame.font.Font(None, size)
    
    # Рендерим текст в поверхность (True означает сглаживание)
    text_surface = font.render(text, True, color)
    
    # Получаем прямоугольник, описывающий текст
    text_rect = text_surface.get_rect()
    
    # Устанавливаем позицию: x - центр по горизонтали, y - верхняя граница
    text_rect.midtop = (x, y)
    
    # Отрисовываем текст на целевой поверхности
    surface.blit(text_surface, text_rect)


def draw_progress_bar(surface, x, y, width, height, value, max_value, color):
    """Отрисовывает прогресс-бар (шкалу заполнения).
    
    Функция рисует прямоугольную шкалу, которая заполняется пропорционально
    отношению value к max_value. Используется для отображения характеристик
    тамагочи (здоровье, голод, счастье и т.д.).
    
    Аргументы:
        surface: Поверхность PyGame для отрисовки
        x: X-координата левого верхнего угла шкалы
        y: Y-координата левого верхнего угла шкалы
        width: Ширина шкалы в пикселях
        height: Высота шкалы в пикселях
        value: Текущее значение (например, текущий голод)
        max_value: Максимальное значение (например, максимальный голод = 100)
        color: Цвет заполненной части шкалы в формате RGB
    
    Пример использования:
        # Отрисовка шкалы здоровья, заполненной на 75%
        draw_progress_bar(screen, 50, 100, 200, 20, 75, 100, GREEN)
        
        # Отрисовка шкалы голода, заполненной на 30%
        draw_progress_bar(screen, 50, 130, 200, 20, 30, 100, RED)
    """
    # Рассчитываем соотношение заполнения (от 0.0 до 1.0)
    ratio = value / max_value
    
    # Отрисовываем рамку шкалы (слегка больше основной шкалы для эффекта границы)
    pygame.draw.rect(surface, BLACK, (x-2, y-2, width+4, height+4), 1)
    
    # Отрисовываем заполненную часть шкалы
    # Заполненная ширина = общая ширина * соотношение заполнения
    pygame.draw.rect(surface, color, (x, y, width * ratio, height))